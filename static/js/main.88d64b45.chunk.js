(this["webpackJsonpgame-bau-cua"]=this["webpackJsonpgame-bau-cua"]||[]).push([[0],{126:function(e,t,n){e.exports={root:"styles_root__2RVCt"}},131:function(e,t,n){e.exports={root:"styles_root__UKEs5"}},139:function(e,t,n){},144:function(e,t){},146:function(e,t){},156:function(e,t){},158:function(e,t){},17:function(e,t,n){e.exports={root:"styles_root__kr_2d",item:"styles_item__1j-O8",content:"styles_content__3Lgnn",matched:"styles_matched__1ICbi",pulse:"styles_pulse__Hi-_I","corner-section":"styles_corner-section__orbAR",reset:"styles_reset__A3Ld4","bet-value":"styles_bet-value__2pSyQ",betted:"styles_betted__3Bm6Q"}},185:function(e,t){},186:function(e,t){},191:function(e,t){},193:function(e,t){},200:function(e,t){},219:function(e,t){},240:function(e,t,n){},241:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),i=n(125),r=n.n(i),s=(n(139),n(242)),o=n(14),u=n(11),l=n(16),d=n(4),b=function(e,t){return Math.floor(function(e,t){return Math.random()*(t-e)+e}(e,t))},f=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},j=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.map((function(e){return"string"===typeof e?e:Array.isArray(e)?e.flat():"object"===typeof e?Object.entries(e).map((function(e){var t=Object(u.a)(e,2),n=t[0];return t[1]?n:""})):""}));return a.flat().filter(Boolean).join(" ")},m=function(){return new Array(3).fill(void 0).map((function(){return b(0,d.d.length)})).map((function(e){return d.d[e]}))},O=function(){return d.d.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,0))}),{})},h=function(){return b(d.f,d.e)},g=n(17),p=n.n(g),v=n(1),_=function(e){var t=e.betValues,n=e.rolledDices,c=e.needToShowResult,i=e.onBet,r=e.onResetBet,s=Object(a.useCallback)((function(e){return t[e]>0}),[t]);return Object(v.jsx)("div",{"data-testid":"dice-grid",className:p.a.root,children:Object.entries(d.c).map((function(e){var a,l=Object(u.a)(e,2),d=l[0],b=l[1],f=s(d);return Object(v.jsx)("div",{"data-testid":d,className:p.a.item,onClick:i(d),children:Object(v.jsxs)("div",{"data-testid":"".concat(d,"-content"),className:j(p.a.content,(a={},Object(o.a)(a,p.a.matched,c&&n.includes(d)),Object(o.a)(a,p.a.betted,f),a)),children:[Object(v.jsx)("img",{width:108,height:"auto",src:b,alt:d}),f&&Object(v.jsxs)(v.Fragment,{children:[!c&&Object(v.jsx)("div",{className:p.a["corner-section"],children:Object(v.jsx)("span",{"data-testid":"".concat(d,"-reset"),className:p.a.reset,onClick:r(d),children:"\u2715"})}),Object(v.jsx)("div",{"data-testid":"".concat(d,"-bet-value"),className:p.a["bet-value"],children:Object(v.jsx)("span",{children:t[d]})})]})]})},d)}))})},y=Object(a.memo)(_);y.displayName="DiceGrid";var x=y,w=n(29),S=n(36),N=n.n(S),k=function(e){var t=e.items,n=e.disabled,a=e.onStart;return Object(v.jsxs)("div",{"data-testid":"dice-plate",className:N.a.root,children:[t.map((function(e,t){return Object(v.jsx)("div",{"data-testid":"item",className:N.a.item,children:Object(v.jsx)("div",{className:N.a.content,children:Object(v.jsx)("img",{width:64,height:"auto",src:d.c[e],alt:"rolled-".concat(e)})})},"".concat(e,"-").concat(t))})),Object(v.jsx)("button",{"data-testid":"play-button",title:"Play",type:"button",className:N.a["play-button"],disabled:n,onClick:a,children:Object(v.jsx)("img",{width:64,height:"auto",src:Object(w.a)("/images/dice.svg",d.g),alt:"play-icon"})})]})},C=Object(a.memo)(k);C.displayName="DicePlate";var I=C,B=n(126),R=n.n(B),P=function(e){var t=e.onClick;return Object(v.jsx)("button",{"data-testid":"new-game-button",title:"New game",className:R.a.root,onClick:t,children:Object(v.jsx)("img",{width:32,height:"auto",src:Object(w.a)("/images/sync.svg",d.g),alt:"new-game-icon"})})},V=Object(a.memo)(P);V.displayName="NewGameButton";var D=V,T=n(44),A=n(37),L=new function e(){Object(T.a)(this,e),this.setItem=function(e,t){var n=A.a.encrypt(e),a=A.a.encrypt(t);window.localStorage.setItem(n,a)},this.getItem=function(e){var t=A.a.encrypt(e),n=window.localStorage.getItem(t)||"";return n?A.a.decrypt(n):n}},E=function(){var e=L.getItem("amount");return console.log("lastAmount",e),e?Number(e):h()},F=n(30),G=n.n(F),H=function(){var e=Object(s.a)().t,t=function(){var e=Object(a.useState)(m),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(O),r=Object(u.a)(i,2),b=r[0],f=r[1],j=Object(a.useState)(!1),g=Object(u.a)(j,2),p=g[0],v=g[1],_=Object(a.useState)(!1),y=Object(u.a)(_,2),x=y[0],w=y[1],S=Object(a.useState)(),N=Object(u.a)(S,2),k=N[0],C=N[1],I=Object(a.useState)(),B=Object(u.a)(I,2),R=B[0],P=B[1],V=Object(a.useState)(E),D=Object(u.a)(V,2),T=D[0],A=D[1],F=Object(s.a)().t,G=Object(a.useCallback)((function(e){return function(){if(!p){var t=d.d.filter((function(e){return b[e]>0})),n=t.reduce((function(e,t){return e+b[t]}),0);x&&f(O),n<T?t.length<3||t.includes(e)?(w(!1),f((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(o.a)({},e,t[e]+1))}))):alert(F("max-bet-msg",{defaultValue:"You can bet up to 3 items!"})):alert(F("exceed-bet-amount-msg",{defaultValue:"Please adjust your betted amount!"}))}}}),[T,b,x,p,F]),H=Object(a.useCallback)((function(e){return function(e){e.stopPropagation(),p||f(O)}}),[p]),M=Object(a.useCallback)((function(e){return function(){window.clearInterval(e),v(!1),w(!0)}}),[]),J=Object(a.useCallback)((function(){c(m)}),[]),K=Object(a.useCallback)((function(e){e.stopPropagation();var t=d.d.filter((function(e){return b[e]>0})),n=t.reduce((function(e,t){return e+b[t]}),0);if(t.length)if(n<=T){var a=window.setInterval(J,d.h);w(!1),v(!0),C(a),P(window.setTimeout(M(a),d.i))}else alert(F("exceed-bet-amount-msg",{defaultValue:"Please adjust your betted amount!"}));else alert(F("no-bet-msg",{defaultValue:"Please bet at least one item!"}))}),[b,T,J,M,F]),Q=Object(a.useCallback)((function(){A(h),w(!1),f(O)}),[]);return Object(a.useEffect)((function(){return function(){k&&R&&p&&(M(k)(),window.clearTimeout(R))}}),[M,k,R,p]),Object(a.useEffect)((function(){if(!p&&x){var e=d.d.filter((function(e){return b[e]>0})).reduce((function(e,t){return n&&n.includes(t)?e+n.filter((function(e){return e===t})).length*b[t]:e-b[t]}),0);A((function(t){return t+e}))}}),[p,b,n,x]),Object(a.useEffect)((function(){L.setItem("amount",String(T))}),[T]),{rolledDices:n,rolling:p,needToShowResult:x,betState:b,amount:T,intervalId:k,timeoutId:R,handleBet:G,handleResetBet:H,handleRoll:K,handleRollingInterval:J,makeCleanInterval:M,startNewSession:Q,setRolledDices:c,setRolling:v,setIntervalId:C,setTimeoutId:P,setBetState:f,setNeedToShowResult:w}}(),n=t.amount,c=t.betState,i=t.rolledDices,r=t.needToShowResult,b=t.rolling,g=t.handleBet,p=t.handleResetBet,_=t.handleRoll,y=t.startNewSession;return Object(v.jsxs)("div",{"data-testid":"dice-game",children:[Object(v.jsx)("div",{className:j(G.a["side-section"],G.a["left-side"]),children:Object(v.jsx)("span",{children:e("happy-banner",{defaultValue:"Happy new year 2021"})})}),Object(v.jsxs)("div",{className:G.a["amount-section"],children:[Object(v.jsxs)("span",{children:["$",f(n)]}),Object(v.jsx)(D,{onClick:y})]}),Object(v.jsx)(I,{disabled:b,items:i,onStart:_}),Object(v.jsx)(x,{betValues:c,rolledDices:i,needToShowResult:r,onBet:g,onResetBet:p}),Object(v.jsx)("div",{className:j(G.a["side-section"],G.a["right-side"]),children:Object(v.jsx)("span",{children:e("happy-banner",{defaultValue:"Happy new year 2021"})})})]})},M=Object(a.memo)(H);M.displayName="DiceGame";var J=M,K=n(131),Q=n.n(K),U=["en","vi"],$=function(){var e=Object(s.a)().i18n,t=Object(a.useCallback)((function(t){return function(){e.changeLanguage(t)}}),[e]);return Object(v.jsx)("div",{"data-testid":"language-switcher",className:Q.a.root,children:U.map((function(e){return Object(v.jsx)("a",{"data-testid":"".concat(e,"-link"),href:"#",onClick:t(e),children:e},e)}))})},q=Object(a.memo)($);q.displayName="LanguageSwitcher";var z=q;n(240);var Y=function(){return Object(v.jsx)(a.Suspense,{fallback:"Loading translation...",children:Object(v.jsxs)("div",{"data-testid":"App",className:"App",children:[Object(v.jsx)(z,{}),Object(v.jsx)(J,{})]})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,243)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))},X=n(72),Z=n(38),ee=n(132),te=n(134);X.a.use(ee.a).use(te.a).use(Z.e).init({fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"}});X.a;r.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(Y,{})}),document.getElementById("root")),W()},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e,t){var n=e.replace(/^\//,"").replace(/\/$/,"");return"".concat(t,"/").concat(n)}},30:function(e,t,n){e.exports={"side-section":"styles_side-section__w8DAV","left-side":"styles_left-side___8tTK","right-side":"styles_right-side__2j5ey","amount-section":"styles_amount-section__1zrEI"}},36:function(e,t,n){e.exports={root:"styles_root__Bag0b",item:"styles_item__29bPs",content:"styles_content__1qV1g","play-button":"styles_play-button__2w0PU"}},37:function(e,t,n){"use strict";(function(e){var a=n(44),c=n(127),i=n(71),r=n.n(i),s=n(4),o=function(){function t(){Object(a.a)(this,t)}return Object(c.a)(t,[{key:"decrypt",value:function(t){var n="".concat(s.a,":").concat(s.b),a=r.a.createDecipher("aes-128-ecb",e.from(n,"base64"));return e.concat([a.update(t,"base64"),a.final()]).toString("utf8")}},{key:"encrypt",value:function(t){var n="".concat(s.a,":").concat(s.b),a=r.a.createCipher("aes-128-ecb",e.from(n,"base64"));return e.concat([a.update(t,"utf8"),a.final()]).toString("base64")}}]),t}();t.a=new o}).call(this,n(6).Buffer)},4:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return b})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return j}));var a=n(14),c=n(16),i=n(29),r="game-bau-cua-key",s="game-bau-cua-secret",o=".",u=["deer","calabash","rooster","fish","crab","shrimp"],l=u.reduce((function(e,t){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},t,Object(i.a)("/images/".concat(t,".svg"),o)))}),{}),d=20,b=100,f=100,j=3e3}},[[241,1,2]]]);
//# sourceMappingURL=main.88d64b45.chunk.js.map